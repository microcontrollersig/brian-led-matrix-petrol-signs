var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(n)}function s(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function u(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function h(){return d(" ")}function p(){return d("")}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}let g;function $(t){g=t}function y(){if(!g)throw new Error("Function called outside component initialization");return g}function b(t){y().$$.on_mount.push(t)}function v(){const t=y();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const r=function(t,e,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,!1,e),o}(e,n);o.slice().forEach((e=>{e.call(t,r)}))}}}function w(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const x=[],_=[],E=[],k=[],A=Promise.resolve();let L=!1;function S(){L||(L=!0,A.then(R))}function O(t){E.push(t)}let j=!1;const U=new Set;function R(){if(!j){j=!0;do{for(let t=0;t<x.length;t+=1){const e=x[t];$(e),C(e.$$)}for($(null),x.length=0;_.length;)_.pop()();for(let t=0;t<E.length;t+=1){const e=E[t];U.has(e)||(U.add(e),e())}E.length=0}while(x.length);for(;k.length;)k.pop()();L=!1,j=!1,U.clear()}}function C(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(O)}}const I=new Set;let T;function B(){T={r:0,c:[],p:T}}function M(){T.r||r(T.c),T=T.p}function P(t,e){t&&t.i&&(I.delete(t),t.i(e))}function q(t,e,n,o){if(t&&t.o){if(I.has(t))return;I.add(t),T.c.push((()=>{I.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function z(t,e){const n={},o={},r={$$scope:1};let s=t.length;for(;s--;){const i=t[s],l=e[s];if(l){for(const t in i)t in l||(o[t]=1);for(const t in l)r[t]||(n[t]=l[t],r[t]=1);t[s]=l}else for(const t in i)r[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}function N(t){return"object"==typeof t&&null!==t?t:{}}function D(t){t&&t.c()}function H(t,e,o,i){const{fragment:l,on_mount:c,on_destroy:a,after_update:u}=t.$$;l&&l.m(e,o),i||O((()=>{const e=c.map(n).filter(s);a?a.push(...e):r(e),t.$$.on_mount=[]})),u.forEach(O)}function F(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Y(e,n,s,i,l,c,u,f=[-1]){const d=g;$(e);const h=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:l,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:o(),dirty:f,skip_bound:!1,root:n.target||d.$$.root};u&&u(h.root);let p=!1;if(h.ctx=s?s(e,n.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return h.ctx&&l(h.ctx[t],h.ctx[t]=r)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](r),p&&function(t,e){-1===t.$$.dirty[0]&&(x.push(t),S(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],h.update(),p=!0,r(h.before_update),h.fragment=!!i&&i(h.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);h.fragment&&h.fragment.l(t),t.forEach(a)}else h.fragment&&h.fragment.c();n.intro&&P(e.$$.fragment),H(e,n.target,n.anchor,n.customElement),R()}$(d)}class G{$destroy(){F(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Q=[];function V(t,e){return{subscribe:W(t,e).subscribe}}function W(e,n=t){let o;const r=new Set;function s(t){if(i(e,t)&&(e=t,o)){const t=!Q.length;for(const t of r)t[1](),Q.push(t,e);if(t){for(let t=0;t<Q.length;t+=2)Q[t][0](Q[t+1]);Q.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(i,l=t){const c=[i,l];return r.add(c),1===r.size&&(o=n(s)||t),i(e),()=>{r.delete(c),0===r.size&&(o(),o=null)}}}}function X(e,n,o){const i=!Array.isArray(e),l=i?[e]:e,c=n.length<2;return V(o,(e=>{let o=!1;const a=[];let u=0,f=t;const d=()=>{if(u)return;f();const o=n(i?a[0]:a,e);c?e(o):f=s(o)?o:t},h=l.map(((e,n)=>function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(e,(t=>{a[n]=t,u&=~(1<<n),o&&d()}),(()=>{u|=1<<n}))));return o=!0,d(),function(){r(h),f()}}))}function J(t){let n,o,r;const s=[t[2]];var i=t[0];function l(t){let n={};for(let t=0;t<s.length;t+=1)n=e(n,s[t]);return{props:n}}return i&&(n=new i(l()),n.$on("routeEvent",t[7])),{c(){n&&D(n.$$.fragment),o=p()},m(t,e){n&&H(n,t,e),c(t,o,e),r=!0},p(t,e){const r=4&e?z(s,[N(t[2])]):{};if(i!==(i=t[0])){if(n){B();const t=n;q(t.$$.fragment,1,0,(()=>{F(t,1)})),M()}i?(n=new i(l()),n.$on("routeEvent",t[7]),D(n.$$.fragment),P(n.$$.fragment,1),H(n,o.parentNode,o)):n=null}else i&&n.$set(r)},i(t){r||(n&&P(n.$$.fragment,t),r=!0)},o(t){n&&q(n.$$.fragment,t),r=!1},d(t){t&&a(o),n&&F(n,t)}}}function K(t){let n,o,r;const s=[{params:t[1]},t[2]];var i=t[0];function l(t){let n={};for(let t=0;t<s.length;t+=1)n=e(n,s[t]);return{props:n}}return i&&(n=new i(l()),n.$on("routeEvent",t[6])),{c(){n&&D(n.$$.fragment),o=p()},m(t,e){n&&H(n,t,e),c(t,o,e),r=!0},p(t,e){const r=6&e?z(s,[2&e&&{params:t[1]},4&e&&N(t[2])]):{};if(i!==(i=t[0])){if(n){B();const t=n;q(t.$$.fragment,1,0,(()=>{F(t,1)})),M()}i?(n=new i(l()),n.$on("routeEvent",t[6]),D(n.$$.fragment),P(n.$$.fragment,1),H(n,o.parentNode,o)):n=null}else i&&n.$set(r)},i(t){r||(n&&P(n.$$.fragment,t),r=!0)},o(t){n&&q(n.$$.fragment,t),r=!1},d(t){t&&a(o),n&&F(n,t)}}}function Z(t){let e,n,o,r;const s=[K,J],i=[];function l(t,e){return t[1]?0:1}return e=l(t),n=i[e]=s[e](t),{c(){n.c(),o=p()},m(t,n){i[e].m(t,n),c(t,o,n),r=!0},p(t,[r]){let c=e;e=l(t),e===c?i[e].p(t,r):(B(),q(i[c],1,1,(()=>{i[c]=null})),M(),n=i[e],n?n.p(t,r):(n=i[e]=s[e](t),n.c()),P(n,1),n.m(o.parentNode,o))},i(t){r||(P(n),r=!0)},o(t){q(n),r=!1},d(t){i[e].d(t),t&&a(o)}}}function tt(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let o="";return n>-1&&(o=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:o}}const et=V(null,(function(t){t(tt());const e=()=>{t(tt())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}));X(et,(t=>t.location)),X(et,(t=>t.querystring));const nt=W(void 0);function ot(t,e,n){let{routes:o={}}=e,{prefix:r=""}=e,{restoreScrollState:s=!1}=e;class i{constructor(t,e){if(!e||"function"!=typeof e&&("object"!=typeof e||!0!==e._sveltesparouter))throw Error("Invalid component object");if(!t||"string"==typeof t&&(t.length<1||"/"!=t.charAt(0)&&"*"!=t.charAt(0))||"object"==typeof t&&!(t instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:n,keys:o}=function(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,o,r,s,i=[],l="",c=t.split("/");for(c[0]||c.shift();r=c.shift();)"*"===(n=r[0])?(i.push("wild"),l+="/(.*)"):":"===n?(o=r.indexOf("?",1),s=r.indexOf(".",1),i.push(r.substring(1,~o?o:~s?s:r.length)),l+=~o&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(l+=(~o?"?":"")+"\\"+r.substring(s))):l+="/"+r;return{keys:i,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}(t);this.path=t,"object"==typeof e&&!0===e._sveltesparouter?(this.component=e.component,this.conditions=e.conditions||[],this.userData=e.userData,this.props=e.props||{}):(this.component=()=>Promise.resolve(e),this.conditions=[],this.props={}),this._pattern=n,this._keys=o}match(t){if(r)if("string"==typeof r){if(!t.startsWith(r))return null;t=t.substr(r.length)||"/"}else if(r instanceof RegExp){const e=t.match(r);if(!e||!e[0])return null;t=t.substr(e[0].length)||"/"}const e=this._pattern.exec(t);if(null===e)return null;if(!1===this._keys)return e;const n={};let o=0;for(;o<this._keys.length;){try{n[this._keys[o]]=decodeURIComponent(e[o+1]||"")||null}catch(t){n[this._keys[o]]=null}o++}return n}async checkConditions(t){for(let e=0;e<this.conditions.length;e++)if(!await this.conditions[e](t))return!1;return!0}}const l=[];o instanceof Map?o.forEach(((t,e)=>{l.push(new i(e,t))})):Object.keys(o).forEach((t=>{l.push(new i(t,o[t]))}));let c=null,a=null,u={};const f=v();async function d(t,e){await(S(),A),f(t,e)}let h=null,p=null;var m;s&&(p=t=>{h=t.state&&t.state.__svelte_spa_router_scrollY?t.state:null},window.addEventListener("popstate",p),m=()=>{h?window.scrollTo(h.__svelte_spa_router_scrollX,h.__svelte_spa_router_scrollY):window.scrollTo(0,0)},y().$$.after_update.push(m));let g=null,$=null;const b=et.subscribe((async t=>{g=t;let e=0;for(;e<l.length;){const o=l[e].match(t.location);if(!o){e++;continue}const r={route:l[e].path,location:t.location,querystring:t.querystring,userData:l[e].userData,params:o&&"object"==typeof o&&Object.keys(o).length?o:null};if(!await l[e].checkConditions(r))return n(0,c=null),$=null,void d("conditionsFailed",r);d("routeLoading",Object.assign({},r));const s=l[e].component;if($!=s){s.loading?(n(0,c=s.loading),$=s,n(1,a=s.loadingParams),n(2,u={}),d("routeLoaded",Object.assign({},r,{component:c,name:c.name,params:a}))):(n(0,c=null),$=null);const e=await s();if(t!=g)return;n(0,c=e&&e.default||e),$=s}return o&&"object"==typeof o&&Object.keys(o).length?n(1,a=o):n(1,a=null),n(2,u=l[e].props),void d("routeLoaded",Object.assign({},r,{component:c,name:c.name,params:a})).then((()=>{nt.set(a)}))}n(0,c=null),$=null,nt.set(void 0)}));return function(t){y().$$.on_destroy.push(t)}((()=>{b(),p&&window.removeEventListener("popstate",p)})),t.$$set=t=>{"routes"in t&&n(3,o=t.routes),"prefix"in t&&n(4,r=t.prefix),"restoreScrollState"in t&&n(5,s=t.restoreScrollState)},t.$$.update=()=>{32&t.$$.dirty&&(history.scrollRestoration=s?"manual":"auto")},[c,a,u,o,r,s,function(e){w.call(this,t,e)},function(e){w.call(this,t,e)}]}class rt extends G{constructor(t){super(),Y(this,t,ot,Z,i,{routes:3,prefix:4,restoreScrollState:5})}}function st(e){let n;return{c(){n=f("main"),n.innerHTML='<section><h1 class="svelte-1hhe5iu">Apps</h1> \n<ul><li><a href="#/imageupload">Image Upload</a></li> \n    <li><a href="#/imagecreator">Image Creator</a></li> \n    <li><a href="#qrcode">QRCode</a></li> \n    <li><a href="#tetristime">Tetris Time</a></li> \n    <li><a href="#abbrev">Internet Abbrevations</a></li> \n    <li><a href="#maze">Maze</a></li> \n    <li><a href="#scoreboard">Scoreboard</a></li></ul></section> \n\n<section><h1 class="svelte-1hhe5iu">Games</h1> \n<ul><li><a href="#hangman">Hangman</a></li> \n    <li><a href="#dino">Dino</a></li></ul></section>'},m(t,e){c(t,n,e)},p:t,i:t,o:t,d(t){t&&a(n)}}}function it(e){let n;return{c(){n=f("main"),n.innerHTML='<section><h1>Image Upload</h1> \n<p>Please upload a binary PBM file</p> \n<div><input type="file" id="input"/></div></section>'},m(t,e){c(t,n,e)},p:t,i:t,o:t,d(t){t&&a(n)}}}async function lt(t){const e=new URLSearchParams;for(let n in t)e.append(n,t[n]);return await fetch("/command",{method:"POST",body:e})}function ct(){const t=this.files[0];console.log(t.name),console.log(t.size);const e=new FileReader;e.addEventListener("loadend",(async()=>{console.log(e.result);const n=new Uint8Array(e.result);let o;console.log(n);let r=0;for(let e=0;e<t.size;e++)if(10===n[e]&&(r+=1),2===r){o=10===n[e+1]?e+2:e+1;break}const s=n[o],i=n[o+1];let l;16==i||(l=10*(s-48)+(i-48)),console.log("width:",l);let c,a=0,u=0;for(let e=o+1;e<t.size;e++)if(10===n[e]){c=e+1;break}console.log("------------start of real data-----------------------------"),await lt({command:"@"});for(let e=c;e<t.size;e++)for(let t=7;t>=0;t--){n[e]&1<<t?(console.log("1 at (",u,",",a,")"),await lt({command:"P",x:a,y:u,val:1})):console.log("0 at (",u,",",a,")"),a+=1,a===l&&(u+=1,a=0)}await lt({command:"U"})})),e.readAsArrayBuffer(t)}function at(t){return b((()=>{document.getElementById("input").addEventListener("change",ct,!1)})),[]}function ut(t,e,n){const o=t.slice();return o[7]=e[n],o}function ft(t,e,n){const o=t.slice();return o[10]=e[n],o}function dt(t,e,n){const o=t.slice();return o[13]=e[n],o}function ht(e){let n,o,r;return{c(){n=f("input"),m(n,"type","checkbox"),m(n,"id",o=e[13]),m(n,"name",r=e[13]),m(n,"class","svelte-1x98n9i")},m(t,e){c(t,n,e)},p:t,d(t){t&&a(n)}}}function pt(e){let n,o,r;return{c(){n=f("label"),m(n,"for",o=e[10][1]),m(n,"id",r=e[10][0]),m(n,"class","grid__item svelte-1x98n9i")},m(t,e){c(t,n,e)},p:t,d(t){t&&a(n)}}}function mt(t){let e,n,o,r,s=t[7]+"";return{c(){e=f("button"),n=d(s),m(e,"class",o="panel "+(t[7]===t[0]?"active":"")+" svelte-1x98n9i"),m(e,"id",r="panel"+t[7])},m(t,o){c(t,e,o),l(e,n)},p(t,n){1&n&&o!==(o="panel "+(t[7]===t[0]?"active":"")+" svelte-1x98n9i")&&m(e,"class",o)},d(t){t&&a(e)}}}function gt(e){let n,o,r,s,i,d,p,g,$,y,b,v=e[1],w=[];for(let t=0;t<v.length;t+=1)w[t]=ht(dt(e,v,t));let x=e[2],_=[];for(let t=0;t<x.length;t+=1)_[t]=pt(ft(e,x,t));let E=e[3],k=[];for(let t=0;t<E.length;t+=1)k[t]=mt(ut(e,E,t));return{c(){n=f("main"),o=f("section"),o.innerHTML='<ul class="svelte-1x98n9i"><li><button id="saveButton" class="svelte-1x98n9i">SAVE</button></li></ul>',r=h();for(let t=0;t<w.length;t+=1)w[t].c();s=h(),i=f("section"),d=f("div");for(let t=0;t<_.length;t+=1)_[t].c();p=h(),g=f("div"),$=f("h2"),$.textContent="PANEL SELECTION",y=h(),b=f("div");for(let t=0;t<k.length;t+=1)k[t].c();m(o,"id","menu"),m(d,"id","board"),m(d,"class","grid svelte-1x98n9i"),m(b,"class","panels svelte-1x98n9i"),m(g,"id","panelselection"),m(i,"id","guts"),m(i,"class","svelte-1x98n9i")},m(t,e){c(t,n,e),l(n,o),l(n,r);for(let t=0;t<w.length;t+=1)w[t].m(n,null);l(n,s),l(n,i),l(i,d);for(let t=0;t<_.length;t+=1)_[t].m(d,null);l(i,p),l(i,g),l(g,$),l(g,y),l(g,b);for(let t=0;t<k.length;t+=1)k[t].m(b,null)},p(t,[e]){if(2&e){let o;for(v=t[1],o=0;o<v.length;o+=1){const r=dt(t,v,o);w[o]?w[o].p(r,e):(w[o]=ht(r),w[o].c(),w[o].m(n,s))}for(;o<w.length;o+=1)w[o].d(1);w.length=v.length}if(4&e){let n;for(x=t[2],n=0;n<x.length;n+=1){const o=ft(t,x,n);_[n]?_[n].p(o,e):(_[n]=pt(o),_[n].c(),_[n].m(d,null))}for(;n<_.length;n+=1)_[n].d(1);_.length=x.length}if(9&e){let n;for(E=t[3],n=0;n<E.length;n+=1){const o=ut(t,E,n);k[n]?k[n].p(o,e):(k[n]=mt(o),k[n].c(),k[n].m(b,null))}for(;n<k.length;n+=1)k[n].d(1);k.length=E.length}},i:t,o:t,d(t){t&&a(n),u(w,t),u(_,t),u(k,t)}}}function $t(t,e,n){!function(t){const e=new URLSearchParams;for(let n in t)e.append(n,t[n]);fetch("/command",{method:"POST",body:e})}({command:"Y",x:t,y:e,val:n})}function yt(t,e,n){let o=new Array(3072).fill(0);const r=Array.from(Array(256).keys(),(t=>"c"+t)),s=Array.from(Array(256).keys(),(t=>["s"+t,"c"+t])),i=Array.from(Array(12).keys(),(t=>t+1));let l=1;function c(){const t=new Uint8Array(o),e=function(t){for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),o=0,r=t.length;o<r;o++)n[o]=t.charCodeAt(o);return e}("P4\n96 32\n"),n=new Uint8Array(e),r=new Uint8Array(t.length+n.length).fill(0);if(r.set(n,0),r.set(t,n.length),console.log(r),window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(r.buffer,"blob.pbm");else{const t=document.createElement("a");document.body.appendChild(t);const e=(window.URL?URL:webkitURL).createObjectURL(new Blob([r]),{type:"data:application/octet-stream;base64,"});t.href=e;const n=new Date(Date.now()),o={weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"numeric",seconds:"numeric"};t.download="brians-petrol-signs-"+n.toLocaleString("en-AU",o).replaceAll(",","-").replace(/\s/g,"")+".pbm",t.click(),setTimeout((()=>{window.URL.revokeObjectURL(e),document.body.removeChild(t)}),0)}}return b((()=>{document.getElementById("saveButton").addEventListener("click",(t=>{c()})),document.querySelectorAll("input[type=checkbox]").forEach((t=>{t.addEventListener("click",(t=>{const e=parseInt(t.target.id.substring(1)),n=(l-1)%6,r=Math.floor((l-1)/6),s=e%16+96*Math.floor(e/16)+16*n+16*r*96;console.log("ledindex",e,"dataindex",s),!0===t.target.checked?o[s]=1:o[s]=0;const i=e%16+16*n,c=Math.floor(e/16)+16*r;console.log("x:",i," y:",c,"val:",o[s]),console.log(o),$t(i,c,o[s])}))})),document.querySelectorAll(".panel").forEach((t=>{t.addEventListener("click",(t=>{document.querySelectorAll(".panel").forEach((t=>{t.classList.remove("active")})),t.target.classList.add("active"),n(0,l=parseInt(t.target.innerHTML)),document.querySelectorAll("input").forEach((t=>{t.checked=!1})),function(){console.log(o);let t=(l-1)%6*16+1536*Math.floor((l-1)/6);for(let e=0;e<256;e++)document.getElementById(`c${e}`).checked=1===o[t],t+=1,t%16==0&&(t=t+96-16)}()}))}))})),[l,r,s,i]}var bt={"/":class extends G{constructor(t){super(),Y(this,t,null,st,i,{})}},"/imageupload":class extends G{constructor(t){super(),Y(this,t,at,it,i,{})}},"/imagecreator":class extends G{constructor(t){super(),Y(this,t,yt,gt,i,{})}}};function vt(e){let n,o,r;return o=new rt({props:{routes:bt}}),{c(){n=f("main"),D(o.$$.fragment)},m(t,e){c(t,n,e),H(o,n,null),r=!0},p:t,i(t){r||(P(o.$$.fragment,t),r=!0)},o(t){q(o.$$.fragment,t),r=!1},d(t){t&&a(n),F(o)}}}return new class extends G{constructor(t){super(),Y(this,t,null,vt,i,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
